<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Freevent</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>

</head>
	<body>
		<div id="content"></div>
		<div id="events"></div>


		// <script type="text/jsx">
		// 	var EventList = React.createClass({

		// 		getInitialState: function(){
		// 			return { events: [] };
		// 		},

		// 		componentWillMount: function() {
		// 			this.fetchLatestNews();
		// 		},

		// 		fetchLatestNews: function(){
		// 			$.ajax({
		// 				url: "http://api.nytimes.com/svc/events/v2/listings.json?&filters=free:true&api-key=bc675c9b17f7d8f5d572be364b116367:9:61020068",
		// 				dataType: 'json',
		// 				data: {format: 'json'}
		// 				success: function(result){
		// 					this.setState({ events: result.results });
		// 				}.bind(this),
		// 				error: function() {
		// 					alert('Error, try again')
		// 				}
		// 			});
		// 		},

		// 		render: function(){
		// 			return <ol className="posts">
		// 				{this.state.events.map(function (posts){
		// 					return (

		// 					)
		// 				})}
		// 			</ol>;
		// 		}
		// 	});

		// 	var EventParse = React.createClass({
		// 		render: function() {
		// 			var eventNodes = this.props.data.map(function(events){
		// 				<EventList 
		// 			})
		// 		}
		// 	})

		// 	React.render(
		// 		<EventList  />,
		// 		document.getElementById('events')
		// 	)

		// </script>
		
		<script type="text/jsx">
			var EventGist = React.createClass({
				getInitialState: function(){
					return {
						event: ''
					};
				},

				componentDidMount: function(){

					$.get(this.props.source, function(data){
						console.log(data);
					})
					.then(function(data){
						this.setState({
							event:JSON.parse(data)
						})
					}.bind(this));
					
				},


				render: function(){
					return (
						<div>
							{this.state.event}
						</div>
					);
				}
			});

			React.render(
				<EventGist source = "/events/search" />,
					document.getElementById('events')
			);





		</script>

	</body>
</html>