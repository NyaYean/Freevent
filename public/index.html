<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Freevent</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>
  <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">

</head>
	<body>
		<div id="content"></div>
		<div id="events"></div>
<body id="page-top">

    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">FreeVent</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a class="page-scroll" href="#about">Event</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#services">About</a>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

   
		
		<script type="text/jsx">

			var EventBox = React.createClass({

				getInitialState: function(){
					return {
						data: '',
						venueName: '',
						borough: '',
						dateDescription: ''
					};
				},


				loadEvents: function(){
					$.ajax({
						url: this.props.source,
						dataType: 'json',
						success: function(data) {

							var eventList = JSON.parse(data.body).results

							this.setState({
								data: eventList

							});
						}.bind(this),
						error: function(xhr, status, err){
							console.error(this.props.url, status, err.toString());
						}.bind(this)
					});
				}




			});


			var EventGist = React.createClass({
			
				componentDidMount: function(){

					$.ajax({
						url: this.props.source,
						dataType: 'json',
						success: function(data) {
							console.log(JSON.parse(data.body).results[0])

							var eventList = JSON.parse(data.body).results
							console.log(eventList)

							var eventName = eventList.map(function(obj){
								return obj.event_name
							});

							var venueName = eventList.map(function(obj){
								return obj.venue_name
							});

							var borough = eventList.map(function(obj){
								return obj.borough
							});

							var dateDescription = eventList.map(function(obj){
								return obj.date_time_description
							});


							this.setState({
								eventName: eventName,
								venueName: venueName,
								borough: borough,
								dateDescription: dateDescription

							});
						}.bind(this),
						error: function(xhr, status, err){
							console.error(this.props.url, status, err.toString());
						}.bind(this)
					})
				},

				render: function(){
					return (
						<div>
							<ol>
								{this.state.eventName}
							</ol>

							<ol>
								{this.state.venueName}
							</ol>

							<ol>
								{this.state.borough}
							</ol>

							<ol>
								{this.state.dateDescription}
							</ol>
						</div>
					);
				}
			});

			React.render(
				<EventGist source = "/events/search" />,
					document.getElementById('events')
			);

		</script>

<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.min.js"></script>
<script src="js/jquery.fittext.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/creative.js"></script>

	</body>
</html>